<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Shaka Player DRM Example</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.6.0/shaka-player.compiled.js"></script>
  <style>
    body { margin: 0; background: #fff; display: flex; justify-content: center; align-items: center; height: 100vh; }
    video { width: 80%; max-width: 960px; }
  </style>
</head>
<body>
  <video id="video" autoplay controls></video>

  <script>
    async function initPlayer() {
      const manifestUri = 'https://videospreparatoriosv2.blob.core.windows.net/videosv3/M%C3%B3dulo%20E/dash.mpd';

      const player = new shaka.Player(document.getElementById('video'));

      // Listen for errors.
      player.addEventListener('error', onErrorEvent);

      // Configure DRM settings
      player.configure({
        drm: {
          servers: {
            'com.widevine.alpha': 'https://widevine-dash.ezdrm.com/widevine-php/widevine-foreignkey.php?pX=E0AFB6',
            'com.microsoft.playready': 'https://playready.ezdrm.com/cency/preauth.aspx?pX=B7AE6C'
          }
        }
      });

      try {
        await player.load(manifestUri);
        console.log('The video has been loaded successfully!');
      } catch (e) {
        onError(e);
      }
    }

    function onErrorEvent(event) {
      onError(event.detail);
    }

    function onError(error) {
      console.error('Error code', error.code, 'object', error);
    }

    shaka.polyfill.installAll();
    if (shaka.Player.isBrowserSupported()) {
      initPlayer();
    } else {
      console.error('Browser not supported!');
    }
  </script>
</body>
</html>
